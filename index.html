<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="width=device-width, user-scalable=no" />
        <title>Beleza Natural</title>
    </head>
    <body>
        
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="PushNotification.js"></script>
        <script type="text/javascript">
                document.addEventListener("deviceready", onDeviceReady, false);
                
                function onDeviceReady() {
                    navigator.splashscreen.hide();   
                    var pushNotification = window.plugins.pushNotification;
                    pushNotification.register(successHandler, errorHandler,{"senderID":"948387944923","ecb":"onNotificationGCM"});
                    
                }
                                
                function successHandler(result) {
                    alert('Callback Success! Result = '+result)
                }
            
                function errorHandler(error) {
                    alert(error);
                }
                            
                function onNotificationGCM(e) {
                        switch( e.event )
                        {
                            case 'registered':
                                if ( e.regid.length > 0 )
                                {
                                    console.log("Regid " + e.regid);
                                    alert('registration id = '+e.regid);
                                }
                            break;
                 
                            case 'message':
                              // this is the actual push notification. its format depends on the data model from the push server
                              alert('message = '+e.message+' msgcnt = '+e.msgcnt);
                            break;
                 
                            case 'error':
                              alert('GCM error = '+e.msg);
                            break;
                 
                            default:
                              alert('An unknown GCM event has occurred');
                              break;
                        }
                    }            
        </script>     
    </body>
</html>